package com.ski.box.view.fragment.bet.bottom;import android.content.Context;import android.content.DialogInterface;import android.view.View;import android.widget.TextView;import androidx.annotation.NonNull;import com.hwangjr.rxbus.RxBus;import com.ski.box.ConstantValue;import com.ski.box.bean.DataCenter;import com.ski.box.bean.MkBetParamEntity;import com.ski.box.view.view.DoubleBetDailogDView;import com.ski.box.view.view.dialog.LotteryDialog;import com.ski.box.view.view.dialog.StrongBottomSheetDialog;import com.yb.core.utils.LanguageUtil;import com.yb.core.utils.ScreenUtils;import com.yb.core.utils.ToastUtil;import java.util.List;import static com.ski.box.ConstantValue.EVENT_REQUEST_BET_SUBMIT;public class BetDanShiDialog extends StrongBottomSheetDialog {    private DoubleBetDailogDView doubleBetListView_d;    private boolean mShowRemind=true;    public BetDanShiDialog(@NonNull Context context) {        super(context);        createView(context);        setOnDismissListener(new DialogInterface.OnDismissListener() {            @Override            public void onDismiss(DialogInterface dialog) {                if (mShowRemind) {                    List<MkBetParamEntity.BetParamEntity> bet = DataCenter.getInstance().getBetParamEntity().getBet();                    boolean resetAmount = false;                    for (int x = 0; x < bet.size(); x++) {                        long betAmount_d = bet.get(x).getBetAmount_d();                        if (betAmount_d != DataCenter.getInstance().getQuickMoney()) {                            resetAmount = true;                            bet.get(x).setBetAmount_d(DataCenter.getInstance().getQuickMoney());                        }                    }                    if (resetAmount) {                        String s = LanguageUtil.getText("金额统一调整为");                        ToastUtil.showInfo( s + DataCenter.getInstance().getQuickMoney());//                        new LotteryDialog().showCenterRemind(context, "金额统一调整为" + DataCenter.getInstance().getQuickMoney());                    }                }            }        });    }    private void createView(Context context) {            doubleBetListView_d = new DoubleBetDailogDView(context);            /*动态计算弹出的高度*/            setHeight();            setContentView(doubleBetListView_d);            MkBetParamEntity   mkBetParamEntity = DataCenter.getInstance().getBetParamEntity();            /*设置里面的数据*/            doubleBetListView_d.setData(mkBetParamEntity, new DoubleBetDailogDView.BettingConfirmListener() {                @Override                public void onClosed() {                    dismiss();                }                @Override                public void onConfirmBetting(View view) {                    /*双面盘投注*/                    MkBetParamEntity betParamEntity = DataCenter.getInstance().getBetParamEntity();                    betParamEntity.setFrom(ConstantValue.BET_FROM_BET_RIGHT_NOW);                    betParamEntity.setBetView(view);                    RxBus.get().post(EVENT_REQUEST_BET_SUBMIT, betParamEntity);                }            });    }    private void setHeight() {        int defaultMinHeight = (int) ((ScreenUtils.getScreenHeight(getContext())+ ScreenUtils.getStatusHeight(getContext()))/1.3);        int defaultMaxHeight = ScreenUtils.dp2px(680);        int headHeight = doubleBetListView_d.getHeadHeight();        int bottomHeight = doubleBetListView_d.getBottomHeight();        int itemHeight = doubleBetListView_d.geItemHeight();        int size = DataCenter.getInstance().getBetParamEntity().getBet().size();        int itemTotalHeight = itemHeight * size;        int dailogHeight = headHeight + bottomHeight + itemTotalHeight;        if (dailogHeight <= defaultMinHeight) {            dailogHeight = defaultMinHeight;        } else if (dailogHeight >= defaultMaxHeight) {            dailogHeight = defaultMaxHeight;        }        setPeekHeight(dailogHeight);        setMaxHeight(dailogHeight);    }    public void onDismiss(boolean showRemind) {        mShowRemind = showRemind;        dismiss();    }    public TextView getBetView() {        return doubleBetListView_d.betConfirm;    }}